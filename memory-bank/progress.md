- [x] Pick frontend frameworks (SvelteKit + Tailwind CSS)
- [x] Initialize dev environment (SvelteKit, TS, Tailwind, Prettier, ESLint, Playwright, adapter-static SPA)
- [x] Connect to Supabase (Installed client, set up .env, created client instance, tested connection)
- [x] Supabase MCP
- [x] Create `food_items` table in Supabase (incl. comment column)
- [x] Create `food_log` table in Supabase (simplified, RLS disabled)
- [x] Enter existing nutrition data from CSV into `food_items`
- [x] Create first view for logging meals (`+page.svelte`: Search, fuzzy match, log selection, recent logs display. RLS disabled on `food_items` as no auth yet.)
- [x] Github project (Created repo `gurgeh/eatelligence` and pushed initial commit)
- [x] Fix page.svelte li cannot have role="button" (Replaced `li` with `role="button"` with a nested `<button>` inside the `li` for accessibility and semantic correctness)
- [x] Delete logged meals
- [x] Choose multiplier and date for logged meals (Implemented inline editing in recent logs)
- [x] Pick food item from last logged meals (Added copy button and delete confirmation to recent logs)
- [x] Fix timestamp display (Changed input to `text`, added helpers for `YYYY-MM-DD HH:mm` local format, updated display format to `sv-SE` 24h)
- [x] Neater log format (Reordered to Date-Name-Multiplier, removed line break, added Today/Yesterday format)
- [x] Max width for desktop (Added `max-w-5xl` to main container)
- [x] Compressed nutrition data per meal (Added summary row below each log entry with calculated values, fixed missing GL column, re-imported data, styled with colored badges)
- [x] Add daily summary dividers to log (Grouped logs by date, calculated daily totals, updated template)
- [x] Implement "Load More" button for log pagination (Used Supabase range query, added button, updated fetch logic)
- [x] Confirm `logged_at` index exists (Verified index `idx_food_log_logged_at` using Supabase MCP)
- [x] Make sure mobile works (Tested with dev tools, improved timestamp editing with native picker, adjusted font sizes and spacing for log items)
- [x] Implement PWA functionality (Installed `vite-plugin-pwa`, configured manifest & service worker in `vite.config.ts`. App is now installable via local network serving, avoiding public hosting).
- [x] Generate and install app icons
- [x] Test PWA on mobile
- [x] Create view for managing food items (`/food-items`: Find, View, Edit, Delete, Create, Styled badges, Search fixed, Delete reactivity fixed)
- [x] Handle deleted food items in log view (Show "(Deleted item)")
- [x] Add `serving_qty` and `serving_unit` columns to `food_items` table via migration
- [x] Create view for creating recipes from log entries (`/create-recipe`)
- [x] LLM integration for auto-filling nutrition data (`/food-items`: Added button to call Gemini 2.5 Pro with grounding, using user-provided API key from Local Storage, includes existing data in prompt, parses JSON response to fill form fields)
- [x] Add Omega-3/6 ratio (Added DB columns, updated types, food item management, recipe creation, log view calculations & display. Daily ratio shown as O6:O3, individual log items show O6, O3 grouped with fats before GL.)
- [x] Fix icon filenames and regenerate icons from correct source (simple icon without text)
- [x] Dropdown for quantity type (Implemented in `/food-items` for create and inline edit using `["g", "dl", "pcs", "portion"]`)
- [x] LLM Auto-fill uses specified serving size (Modified prompt in `/food-items` to request nutrition per user-defined `serving_qty` + `serving_unit`, includes existing data as context for that serving)
- [x] Calculate kcal from protein, fat, and carbs and fibers (using TEF: P=3, C=3.7, Fi=2, F=9) and remove DB column
- [x] Make the log line shorter (Abbreviated Cal->C, reduced badge padding/gap in `+page.svelte` for both log items and daily summary)
- [x] The log should show quantity and unit (Updated `+page.svelte` to fetch and display `serving_qty` and `serving_unit` next to the multiplier. Confirmed working for new items, older items lack data.)
- [x] Fix calorie calculation discrepancy between log items and daily summary (Corrected rounding issues in `+page.svelte`. Both calculations now use exact nutrient values passed to `calculateKcal` for a single rounding step. Also reintroduced `Math.round` for displaying individual nutrient totals in the summary row for neatness.)
- [x] Omega 3/6 should show "-" not only in the summary but also in the log (Updated individual log item badge logic in `+page.svelte`)
- [x] Fix Omega-3/6 display in Manage Items (Corrected order and colors in `/food-items/+page.svelte` display badges and create form inputs to match log view: PFC, FiS, MPS, 6:3 (orange), GL. Ensured 0 values are displayed and editable.)
- [x] (amount unit) should probably be displayed before the x in the log (Changed display order in `+page.svelte`)
- [x] Add nutrition targets or target intervals
- [x] Check if LLM auto-fill works now (log prompt. switch back to `gemini-2.5-pro-preview-03-25`)
- [x] LLM should be allowed to fill comment with assumed portion size etc (Updated prompt to include user comment, switched to Pro model, instructed LLM to return assumptions in comment field, updated frontend to append assumptions)
- [x] Serving unit should change default quantity based on the selected unit in Add New Item (Added `on:change` handler to unit select in `/food-items` to set qty: g=100, dl/pcs/portion=1)
- [x] LLM integration from recipe name to ingredients (`/recipes/generate`: Created page, implemented LLM call for ingredient list focusing on caloric items, added UI for review/deletion, implemented parallel processing for fetching nutrition & inserting new items with standard serving sizes (100g/1dl) + multipliers, fetching existing item nutrition, summing totals, and creating final recipe `food_item`. Improved display format. Added retry button for failed ingredient processing. Added nutritional summary display before saving. Separated processing and saving into distinct buttons. Added link from `/create-recipe`.)
- [x] Allow name+comment in recipe creation (Implemented as part of LLM recipe generation)
- [x] Intermittent ingredient fetching errors which are not registered as errors when LLM-generating recipes.
- [x] Do not add references in the LLM comments and make them shorter. Also The ingredient list maker should not use search.
- [x] The odd async bug was not fixed. Fix.
- [x] Fix Omega-3/6 ratio display bug in LLM recipe generation (`/recipes/generate`: Added dedicated `ratio` util, updated total calculation display, added LLM response validation)
- [x] Possibility to add ingredients to the LLM recipe list
- [x] Possibility to modify quantities in the LLM recipe list
- [ ] Change calorie calculation to new carb field definition: carbs excluding fibers.
- [ ] Authentication (Supabase) and decide on separate food items for each user (yes)
- [ ] Clear DB
- [ ] Host on eatelligence.fendrich.se (GCP bucket)
- [ ] Add optional photo input with name for recipes
- [ ] Show calculated kcal in add new item and recipe creation
- [ ] Mean for last 7 days
- [ ] For performance reasons, a local Svelte store may be used to store food_items.
- [ ] Setting new LLM API key. Can normal people get the key somewhere?
- [ ] Prettier interface. Maybe logo on desktop
- [ ] Read through code, including TODOs
- [ ] Maybe ask LLM for cleanup
- [ ] Construct some sort of tutorial (in Readme or in app)
- [ ] Make a real README.md
- [ ] Add a license
